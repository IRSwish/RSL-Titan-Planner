<!DOCTYPE html>
<html lang="fr">
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://unpkg.com/lucide@latest" defer></script>
  <meta charset="UTF-8">
  <script src="/config/site-config.js"></script>
  <link rel="stylesheet" href="/style/style.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
</head>
<body>
  
  <!-- BARRE DE MENU CENTR√âE -->
  <div id="menu-container"></div>

  <div class="header-wrapper">
    <header id="page-title"></header>
  </div> 

  <div class="timeline-container" id="timeline-container">
    <div class="timeline"></div>
  </div>

  <!-- Summary box -->
  <div class="summary-box">
    <div class="legend">
      <div><span class="legend-dot skipped"></span> Skipped</div>
      <div><span class="legend-dot in-progress"></span> In progress</div>
      <div><span class="legend-dot done"></span> Done</div>
      <div><span class="legend-dot not-started"></span> Not started</div>
    </div>
    <div>Acquired : <span id="points-acquired">0</span></div>
    <div>Virtual total : <span id="points-virtual">0</span></div>
    <div>Skipped : <span id="points-passed">0</span></div>
  </div>

  <!-- ‚ö° Charger la config AVANT le script -->
  <script src="fusions-config.js"></script>
  <script>
    function loadFusionFromHash() {
      const fusionKey = window.location.hash.replace('#', '');
      const fusion = window.fusions[fusionKey];
  
      if (fusion) {
        document.getElementById('page-title').textContent = fusion.name;
        document.title = `${fusion.name}  -  ${window.siteConfig.title}`;
  
        const timelineContainer = document.getElementById('timeline-container');
        timelineContainer.setAttribute('data-json', fusion.json);
  
        // üîÅ Recharger le JSON et la timeline
        if (typeof window.reloadTimeline === 'function') {
          window.reloadTimeline();
        }
      } else {
        document.getElementById('page-title').textContent = "Unlisted fusion yet";
        document.title = "Unlisted fusion - " + window.siteConfig.title;
      }
    }
  
    // Au chargement initial
    loadFusionFromHash();
  
    // üëÇ On √©coute les changements de hash
    window.addEventListener('hashchange', loadFusionFromHash);
  </script>
  <script src="fusion.js"></script>
  <script src="/script.js"></script>
</body>
</html>