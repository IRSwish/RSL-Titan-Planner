<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Siege Planner â€“ PoC</title>
    <link rel="stylesheet" href="/siege/style.css">
</head>
<body>
<header class="top-bar">
    <div class="logo-title">
        <div class="app-logo-circle"></div>
        <div class="title-text">
            Siege Planner
            <p class="subtitle">PoC realtime â€“ Raid Shadow Legends</p>
        </div>
    </div>

    <div class="room-controls">
        <div class="room-row">
            <input id="roomInput" placeholder="Room code (ex: clan-omega8647)">
            <button id="joinRoomBtn">Join</button>
            <button id="createRoomBtn">Create</button>
        </div>
        <div class="room-info">
            ðŸ”— <span id="currentRoomLabel">No Room</span>
            <button id="copyLinkBtn" class="ghost-btn">Copy Link</button>
        </div>
    </div>
</header>

<main class="layout">
    <section class="map-section">
        <div class="map-container">
            <img src="/siege/img/Siege_Map.webp" class="map-img" alt="Siege Map">

            <div class="post-point" id="post1" data-post-id="post1" data-type="post" title="Post 1">
                <img class="post-icon">
                <img class="post-border" src="/siege/img/posts/border_post.webp">
                <div class="post-label">Post 1</div>
            </div>
            <div class="post-point" id="post2" data-post-id="post2" data-type="post" title="Post 2">
                <img class="post-icon">
                <img class="post-border" src="/siege/img/posts/border_post.webp">
                <div class="post-label">Post 2</div>
            </div>
            <div class="post-point" id="post3" data-post-id="post3" data-type="post" title="Post 3">
                <img class="post-icon">
                <img class="post-border" src="/siege/img/posts/border_post.webp">
                <div class="post-label">Post 3</div>
            </div>
            <div class="post-point" id="post4" data-post-id="post4" data-type="post" title="Post 4">
                <img class="post-icon">
                <img class="post-border" src="/siege/img/posts/border_post.webp">
                <div class="post-label">Post 4</div>
            </div>
            <div class="post-point" id="post5" data-post-id="post5" data-type="post" title="Post 5">
                <img class="post-icon">
                <img class="post-border" src="/siege/img/posts/border_post.webp">
                <div class="post-label">Post 5</div>
            </div>
            <div class="post-point" id="post6" data-post-id="post6" data-type="post" title="Post 6">
                <img class="post-icon">
                <img class="post-border" src="/siege/img/posts/border_post.webp">
                <div class="post-label">Post 6</div>
            </div>
            <div class="post-point" id="post7" data-post-id="post7" data-type="post" title="Post 7">
                <img class="post-icon">
                <img class="post-border" src="/siege/img/posts/border_post.webp">
                <div class="post-label">Post 7</div>
            </div>
            <div class="post-point" id="post8" data-post-id="post8" data-type="post" title="Post 8">
                <img class="post-icon">
                <img class="post-border" src="/siege/img/posts/border_post.webp">
                <div class="post-label">Post 8</div>
            </div>
            <div class="post-point" id="post9" data-post-id="post9" data-type="post" title="Post 9">
                <img class="post-icon">
                <img class="post-border" src="/siege/img/posts/border_post.webp">
                <div class="post-label">Post 9</div>
            </div>
            <div class="post-point" id="post10" data-post-id="post10" data-type="post" title="Post 10">
                <img class="post-icon">
                <img class="post-border" src="/siege/img/posts/border_post.webp">
                <div class="post-label">Post 10</div>
            </div>
            <div class="post-point" id="post11" data-post-id="post11" data-type="post" title="Post 11">
                <img class="post-icon">
                <img class="post-border" src="/siege/img/posts/border_post.webp">
                <div class="post-label">Post 11</div>
            </div>
            <div class="post-point" id="post12" data-post-id="post12" data-type="post" title="Post 12">
                <img class="post-icon">
                <img class="post-border" src="/siege/img/posts/border_post.webp">
                <div class="post-label">Post 12</div>
            </div>
            <div class="post-point" id="post13" data-post-id="post13" data-type="post" title="Post 13">
                <img class="post-icon">
                <img class="post-border" src="/siege/img/posts/border_post.webp">
                <div class="post-label">Post 13</div>
            </div>
            <div class="post-point" id="post14" data-post-id="post14" data-type="post" title="Post 14">
                <img class="post-icon">
                <img class="post-border" src="/siege/img/posts/border_post.webp">
                <div class="post-label">Post 14</div>
            </div>
            <div class="post-point" id="post15" data-post-id="post15" data-type="post" title="Post 15">
                <img class="post-icon">
                <img class="post-border" src="/siege/img/posts/border_post.webp">
                <div class="post-label">Post 15</div>
            </div>
            <div class="post-point" id="post16" data-post-id="post16" data-type="post" title="Post 16">
                <img class="post-icon">
                <img class="post-border" src="/siege/img/posts/border_post.webp">
                <div class="post-label">Post 16</div>
            </div>
            <div class="post-point" id="post17" data-post-id="post17" data-type="post" title="Post 17">
                <img class="post-icon">
                <img class="post-border" src="/siege/img/posts/border_post.webp">
                <div class="post-label">Post 17</div>
            </div>
            <div class="post-point" id="post18" data-post-id="post18" data-type="post" title="Post 18">
                <img class="post-icon">
                <img class="post-border" src="/siege/img/posts/border_post.webp">
                <div class="post-label">Post 18</div>
            </div>
            <div class="post-point" id="manashrine1" data-post-id="manashrine1" data-type="manashrine" title="Mana Shrine 1">
                <img class="post-icon">
                <img class="post-border" src="/siege/img/posts/border_post.webp">
                <div class="post-label">Mana Shrine 1</div>
            </div>
            <div class="post-point" id="manashrine2" data-post-id="manashrine2" data-type="manashrine" title="Mana Shrine 2">
                <img class="post-icon">
                <img class="post-border" src="/siege/img/posts/border_post.webp">
                <div class="post-label">Mana Shrine 2</div>
            </div>
            <div class="post-point" id="magictower1" data-post-id="magictower1" data-type="magictower" title="Magic Tower 1">
                <img class="post-icon">
                <img class="post-border" src="/siege/img/posts/border_post.webp">
                <div class="post-label">Magic Tower 1</div>
            </div>
            <div class="post-point" id="magictower2" data-post-id="magictower2" data-type="magictower" title="Magic Tower 2">
                <img class="post-icon">
                <img class="post-border" src="/siege/img/posts/border_post.webp">
                <div class="post-label">Magic Tower 2</div>
            </div>
            <div class="post-point" id="magictower3" data-post-id="magictower3" data-type="magictower" title="Magic Tower 3">
                <img class="post-icon">
                <img class="post-border" src="/siege/img/posts/border_post.webp">
                <div class="post-label">Magic Tower 3</div>
            </div>
            <div class="post-point" id="magictower4" data-post-id="magictower4" data-type="magictower" title="Magic Tower 4">
                <img class="post-icon">
                <img class="post-border" src="/siege/img/posts/border_post.webp">
                <div class="post-label">Magic Tower 4</div>
            </div>
            <div class="post-point" id="defensetower1" data-post-id="defensetower1" data-type="defensetower" title="Defense Tower 1">
                <img class="post-icon">
                <img class="post-border" src="/siege/img/posts/border_post.webp">
                <div class="post-label">Defense Tower 1</div>
            </div>
            <div class="post-point" id="defensetower2" data-post-id="defensetower2" data-type="defensetower" title="Defense Tower 2">
                <img class="post-icon">
                <img class="post-border" src="/siege/img/posts/border_post.webp">
                <div class="post-label">Defense Tower 2</div>
            </div>
            <div class="post-point" id="defensetower3" data-post-id="defensetower3" data-type="defensetower" title="Defense Tower 3">
                <img class="post-icon">
                <img class="post-border" src="/siege/img/posts/border_post.webp">
                <div class="post-label">Defense Tower 3</div>
            </div>
            <div class="post-point" id="defensetower4" data-post-id="defensetower4" data-type="defensetower" title="Defense Tower 4">
                <img class="post-icon">
                <img class="post-border" src="/siege/img/posts/border_post.webp">
                <div class="post-label">Defense Tower 4</div>
            </div>
            <div class="post-point" id="defensetower5" data-post-id="defensetower5" data-type="defensetower" title="Defense Tower 5">
                <img class="post-icon">
                <img class="post-border" src="/siege/img/posts/border_post.webp">
                <div class="post-label">Defense Tower 5</div>
            </div>
            <div class="post-point" id="stronghold" data-post-id="stronghold" data-type="stronghold" title="Stronghold">
                <img class="post-icon">
                <img class="post-border" src="/siege/img/posts/border_post.webp">
                <div class="post-label">Stronghold</div>
            </div>
        </div>

        <p class="hint-text">
            ðŸ”¹ Click on a post to edit teams.<br>
            ðŸ”¹ Share the room code for live sync.<br>
            ðŸ”¹ Data is saved in Firebase.
        </p>
    </section>
</main>

<section id="summarySection" class="summary-section">
    <h2 class="summary-title" id="summaryTitle">TEAMS (0)</h2>

    <div class="summary-sort">
        <button id="sortByMember">Sort by Member</button>
        <button id="sortByPost">Sort by Post</button>
    </div>

    <table id="summaryTable">
        <thead>
            <tr>
                <th>Post</th>
                <th>Group</th>
                <th>Team</th>
                <th>Cond.</th>
                <th>Member</th>
                <th>HH</th>
                <th>Lead</th>
                <th>Champion 2</th>
                <th>Champion 3</th>
                <th>Champion 4</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>
</section>

<section id="membersSection" class="members-section">
    <h2 id="membersTitle">Clan Members (0)</h2>

    <div class="members-list" id="membersList"></div>

    <div class="add-member">
        <input id="newMemberPseudo" placeholder="Pseudo">
        <input id="newMemberLink" placeholder="HellHades Optimizer Link (optional)">
        <button id="addMemberBtn">Add</button>
    </div>
</section>

<!-- Modal de composition -->
<div id="modalOverlay" class="modal-overlay">
    <div class="modal">
        <div class="modal-header">
            <h2 id="modalTitle">Poste</h2>
            <button id="closeModal" class="ghost-btn small">âœ•</button>
        </div>

        <!-- Conditions (une seule fois, en haut) -->
        <div class="field-group conditions-group">
        <button id="conditionToggle" type="button" class="condition-toggle" title="Choisir une condition">
            <img id="conditionCurrentIcon" class="condition-current-icon" src="/siege/img/Condition.webp" alt="Condition" />
        </button>

        <div id="conditionsPanel" class="conditions-panel"></div>

        <!-- valeur vraiment stockÃ©e (id de la condition) -->
        <input type="hidden" id="condition" value="" />
        </div>

        <div class="modal-content">
            <!-- Lignes d'Ã©quipes dynamiques -->
            <div class="teams-wrapper">
                <div id="teamsContainer"></div>
                <button id="addTeamBtn" class="ghost-btn add-team-btn">+ ADD TEAM</button>
            </div>
        </div>

        <button id="saveBtn" class="save-btn">ðŸ’¾ SAVE TEAMS</button>
        <p id="statusMsg" class="status"></p>
    </div>
</div>

<!-- sql.js (SQLite in browser) -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sql.js/1.8.0/sql-wasm.js"></script>
<!-- Script principal -->
<script type="module" src="/siege/script.js"></script>
</body>
</html>
