<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Siege Planner â€“ PoC</title>
    <link rel="stylesheet" href="/siege/style.css">
</head>
<body>
<header class="top-bar">
    <div class="logo-title">
        <div class="app-logo-circle"></div>
        <div class="title-text">
            <h1>Siege Planner</h1>
            <p class="subtitle">PoC temps rÃ©el â€“ Raid Shadow Legends</p>
        </div>
    </div>

    <div class="room-controls">
        <div class="room-row">
            <input id="roomInput" placeholder="Code de salle (ex: clan-omega)">
            <button id="joinRoomBtn">Rejoindre</button>
            <button id="createRoomBtn">CrÃ©er</button>
        </div>
        <div class="room-info">
            ðŸ”— <span id="currentRoomLabel">Aucune salle</span>
            <button id="copyLinkBtn" class="ghost-btn">Copier le lien</button>
        </div>
    </div>
</header>

<main class="layout">
    <section class="map-section">
        <div class="map-container">
            <img src="/siege/img/Siege_Map.webp" class="map-img" alt="Siege Map">

            <div class="post-point" id="post1" data-post-id="post1" title="Poste 1"></div>
            <div class="post-point" id="post2" data-post-id="post2" title="Poste 2"></div>
        </div>

        <p class="hint-text">
            ðŸ”¹ Clique un point pour Ã©diter les teams.<br>
            ðŸ”¹ Partage le code de salle pour la synchro live.<br>
            ðŸ”¹ Les teams sont sauvegardÃ©es dans Firebase.
        </p>
    </section>
</main>

<!-- Modal de composition -->
<div id="modalOverlay" class="modal-overlay">
    <div class="modal">
        <div class="modal-header">
            <h2 id="modalTitle">Poste</h2>
            <button id="closeModal" class="ghost-btn small">âœ•</button>
        </div>

        <!-- Conditions (une seule fois, en haut) -->
        <div class="field-group conditions-group">
            <label>Conditions du poste</label>
            <select id="cond1">
                <option value="">Aucune</option>
                <option>No Duplicate</option>
                <option>Buff Cleanser</option>
                <option>Anti-Heal</option>
                <option>Anti-RÃ©surrection</option>
                <option>ContrÃ´le fort</option>
            </select>
            <select id="cond2">
                <option value="">Aucune</option>
                <option>No Duplicate</option>
                <option>Buff Cleanser</option>
                <option>Anti-Heal</option>
                <option>Anti-RÃ©surrection</option>
                <option>ContrÃ´le fort</option>
            </select>
            <select id="cond3">
                <option value="">Aucune</option>
                <option>No Duplicate</option>
                <option>Buff Cleanser</option>
                <option>Anti-Heal</option>
                <option>Anti-RÃ©surrection</option>
                <option>ContrÃ´le fort</option>
            </select>
        </div>

        <div class="modal-content">
            <!-- Lignes d'Ã©quipes dynamiques -->
            <div class="teams-wrapper">
                <div id="teamsContainer"></div>
                <button id="addTeamBtn" class="ghost-btn add-team-btn">+ Ajouter une team</button>
            </div>
        </div>

        <button id="saveBtn" class="save-btn">ðŸ’¾ Sauvegarder les teams</button>
        <p id="statusMsg" class="status"></p>
    </div>
</div>

<!-- sql.js (SQLite in browser) -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sql.js/1.8.0/sql-wasm.js"></script>
<!-- Script principal -->
<script type="module" src="/siege/script.js"></script>
</body>
</html>
