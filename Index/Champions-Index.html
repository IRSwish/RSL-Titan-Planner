<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Champions - RSL Tools</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Inter', sans-serif;
      background-color: #0e0e0e;
      color: #fcf6ff;
      margin: 0;
      padding: 0;
    }

    .container {
      width: 95%;
      max-width: 1400px;
      margin: 40px auto;
    }

    /* Barre de recherche */
    .search-bar {
      text-align: center;
      margin-bottom: 15px;
    }

    #searchInput {
      width: 60%;
      padding: 12px 16px;
      font-size: 16px;
      border-radius: 10px;
      border: none;
      background: #1a1a1a;
      color: #fcf6ff;
      outline: none;
      box-shadow: 0 0 8px #f52584;
    }

    /* Factions */
    .faction-bar {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 10px;
      margin: 20px 0;
    }

    .faction-icon {
      width: 50px;
      height: 50px;
      border: 2px solid transparent;
      border-radius: 50%;
      cursor: pointer;
      transition: transform 0.2s, border-color 0.2s;
    }

    .faction-icon:hover {
      transform: scale(1.1);
    }

    .faction-icon.active {
      border-color: #f52584;
      transform: scale(1.1);
    }

    /* Filtres */
    .filters {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px;
      margin-bottom: 25px;
      align-items: center;
    }

    .rarity-btn {
      background: none;
      border: 1px solid #555;
      color: #fcf6ff;
      border-radius: 8px;
      padding: 6px 10px;
      cursor: pointer;
      transition: all 0.2s;
    }

    .rarity-btn.active {
      border-color: #f52584;
      background: #f52584;
    }

    .checkbox-container {
      display: flex;
      align-items: center;
      gap: 6px;
    }

    /* Grille des champions */
    .champion-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
      gap: 15px;
      justify-items: center;
    }

    /* Carte champion */
    .champion-card {
      background: none;
      border: none;
      text-align: center;
      position: relative;
      width: 120px;
      height: 120px;
      cursor: pointer;
      transition: transform 0.2s;
    }

    .champion-card:hover {
      transform: scale(1.05);
    }

    /* Image du champion */
    .champion-img {
      width: 100%;
      height: 100%;
      border-radius: 8px;
      object-fit: cover;
      display: block;
    }

    /* Cadre de rareté superposé */
    .rarity-frame {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      object-fit: contain;
    }

    /* Nom du champion */
    .champion-name {
      font-size: 13px;
      font-weight: 600;
      margin-top: 6px;
      text-align: center;
    }

    .counter {
      text-align: center;
      margin-bottom: 15px;
      font-size: 15px;
      opacity: 0.8;
    }

    @media (max-width: 700px) {
      #searchInput { width: 90%; }
      .champion-card { width: 100px; height: 100px; }
      .faction-icon { width: 40px; height: 40px; }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="search-bar">
      <input type="text" id="searchInput" placeholder="Rechercher un champion...">
    </div>

    <div class="faction-bar" id="factionBar"></div>

    <div class="filters">
      <div class="checkbox-container">
        <input type="checkbox" id="invocableOnly">
        <label for="invocableOnly">Invocables seulement</label>
      </div>
      <button class="rarity-btn" data-rarity="Mythic">Mythique</button>
      <button class="rarity-btn" data-rarity="Legendary">Légendaire</button>
      <button class="rarity-btn" data-rarity="Epic">Épique</button>
      <button class="rarity-btn" data-rarity="Rare">Rare</button>
      <button class="rarity-btn" data-rarity="Uncommon">Peu commun</button>
      <button class="rarity-btn" data-rarity="Common">Commun</button>
    </div>

    <div class="counter" id="championCount"></div>

    <div id="championGrid" class="champion-grid"></div>
  </div>

  <script>
    let champions = [];
    let factions = [];

    const grid = document.getElementById('championGrid');
    const factionBar = document.getElementById('factionBar');
    const searchInput = document.getElementById('searchInput');
    const rarityButtons = document.querySelectorAll('.rarity-btn');
    const invocableCheckbox = document.getElementById('invocableOnly');
    const countDisplay = document.getElementById('championCount');

    let selectedFaction = null;
    let selectedRarities = [];

    // Charger les données JSON
    fetch('champions.json')
      .then(res => res.json())
      .then(data => {
        champions = data.champions;
        factions = data.factions;
        renderFactions();
        displayChampions();
      })
      .catch(err => {
        console.error("Erreur de chargement du JSON:", err);
      });

    function renderFactions() {
      factions.forEach(f => {
        const img = document.createElement('img');
        img.src = f.icon;
        img.alt = f.name;
        img.classList.add('faction-icon');
        img.dataset.faction = f.name;
        img.addEventListener('click', () => {
          document.querySelectorAll('.faction-icon').forEach(i => i.classList.remove('active'));
          if (selectedFaction === f.name) {
            selectedFaction = null;
          } else {
            selectedFaction = f.name;
            img.classList.add('active');
          }
          displayChampions();
        });
        factionBar.appendChild(img);
      });
    }

    function displayChampions() {
      const searchTerm = searchInput.value.toLowerCase();
      const invocableOnly = invocableCheckbox.checked;

      const filtered = champions.filter(c => {
        const matchesName = c.name.toLowerCase().includes(searchTerm);
        const matchesFaction = !selectedFaction || c.faction === selectedFaction;
        const matchesRarity = selectedRarities.length === 0 || selectedRarities.includes(c.rarity);
        const matchesInvocable = !invocableOnly || c.invocable;
        return matchesName && matchesFaction && matchesRarity && matchesInvocable;
      });

      grid.innerHTML = "";
      countDisplay.textContent = `${filtered.length} champion${filtered.length > 1 ? 's' : ''} trouvé${filtered.length > 1 ? 's' : ''}`;

      filtered.forEach(c => {
        const card = document.createElement('div');
        card.classList.add('champion-card');

        const img = document.createElement('img');
        img.src = c.image;
        img.alt = c.name;
        img.loading = "lazy";
        img.classList.add('champion-img');

        const frame = document.createElement('img');
        frame.src = `rarity/${c.rarity}.webp`;
        frame.alt = `${c.rarity} frame`;
        frame.classList.add('rarity-frame');

        const name = document.createElement('div');
        name.classList.add('champion-name');
        name.textContent = c.name;

        card.appendChild(img);
        card.appendChild(frame);
        card.appendChild(name);

        grid.appendChild(card);
      });

      if (filtered.length === 0) {
        grid.innerHTML = '<p style="grid-column: 1 / -1; text-align:center;">Aucun champion trouvé.</p>';
      }
    }

    // Filtres interactifs
    searchInput.addEventListener('input', displayChampions);
    invocableCheckbox.addEventListener('change', displayChampions);

    rarityButtons.forEach(btn => {
      btn.addEventListener('click', () => {
        btn.classList.toggle('active');
        const rarity = btn.dataset.rarity;
        if (selectedRarities.includes(rarity)) {
          selectedRarities = selectedRarities.filter(r => r !== rarity);
        } else {
          selectedRarities.push(rarity);
        }
        displayChampions();
      });
    });
  </script>
</body>
</html>
