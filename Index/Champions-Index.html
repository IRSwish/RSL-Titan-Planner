<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Champions - RSL Tools</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style/style.css">
  <style>
  @font-face {
    font-family: 'American Captain';
    src: url('/style/American Captain.otf') format('opentype');
  }

    
   body {
    font-family: 'Inter', sans-serif;
    background-color: #0e0e0e;
    color: #fcf6ff;
    margin: 0;
    padding: 0;
  }
  
  .container {
    width: 95%;
    max-width: 1400px;
    margin: 20px auto;
  }
  
  /* Search bar */
  .search-bar {
    text-align: center;
    margin-bottom: 15px;
  }
  
  #searchInput {
    width: 60%;
    padding: 12px 16px;
    font-size: 16px;
    border-radius: 10px;
    border: 2px solid #d4af37;
    background: #1a1a1a;
    color: #fcf6ff;
    outline: none;
    transition: border 0.2s;
  }
  
  #searchInput:focus {
    border-color: #fce47e;
  }
  
  /* Faction bar */
  .faction-bar {
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
    gap: 10px;
    margin: 25px 0;
  }
  
  .faction-icon {
    width: 50px;
    height: 50px;
    border: 2px solid transparent;
    border-radius: 5px;
    cursor: pointer;
    transition: transform 0.2s, border-color 0.2s;
    object-fit: contain;
    background-color: #1a1a1a;
    padding: 4px;
  }
  
  .faction-icon:hover {
    transform: scale(1.1);
    border-color: #d4af37;
  }
  
  .faction-icon.active {
    border-color: #d4af37;
    transform: scale(1.1);
  }
  
  /* FILTERS GLOBAL WRAPPER */
  .filters-wrapper {
    display: flex;
    justify-content: center;
    gap: 40px;
    flex-wrap: wrap;
    margin-bottom: 25px;
  }
  
  .filter-section {
    text-align: center;
    width: 250px;
  }
  
  .section-label {
    font-weight: 600;
    color: #bbbbbb;
    margin-bottom: 8px;
  }
  
  .filter-buttons {
    display: grid;
    justify-items: center;
    gap: 8px;
  }
  
  /* Grilles spécifiques */
  .rarity-grid {
    grid-template-columns: repeat(3, 1fr);
  }
  
  .affinity-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .type-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .rarity-btn,
  .affinity-btn,
  .type-btn {
    background: none;
    border: 2px solid #555;
    color: #fcf6ff;
    border-radius: 8px;
    padding: 4px 8px;
    cursor: pointer;
    transition: all 0.2s;
    width: 60px;
    height: 40px;
    display: flex;
    justify-content: center;
    align-items: center;
  }
  
  .rarity-btn img,
  .affinity-btn img {
    width: 24px;
    height: 24px;
    object-fit: contain;
  }
  
  /* Boutons actifs → contour doré */
  .rarity-btn.active,
  .affinity-btn.active,
  .type-btn.active {
    border-color: #d4af37;
    background: none;
    box-shadow: 0 0 6px rgba(212, 175, 55, 0.4);
  }
  
  /* Hover plus doux */
  .rarity-btn:hover,
  .affinity-btn:hover,
  .type-btn:hover {
    border-color: #d4af37;
  }
  
  .checkbox-container {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
    margin-bottom: 15px;
  }

  /* Switch personnalisé */
.switch {
  position: relative;
  display: inline-block;
  width: 50px;
  height: 26px;
}

.switch input {
  opacity: 0;
  width: 0;
  height: 0;
}

.slider {
  position: absolute;
  cursor: pointer;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: #444;
  border: 2px solid #d4af37;
  transition: 0.3s;
  border-radius: 34px;
}

.slider:before {
  position: absolute;
  content: "";
  height: 18px;
  width: 18px;
  left: 3px;
  bottom: 2px;
  background-color: #d4af37;
  transition: 0.3s;
  border-radius: 50%;
  box-shadow: 0 0 6px rgba(212, 175, 55, 0.5);
}

.switch input:checked + .slider {
  background-color: #d4af37;
}

.switch input:checked + .slider:before {
  transform: translateX(24px);
  background-color: #0e0e0e;
}

/* Texte du label */
.checkbox-container label {
  font-weight: 600;
  font-size: 14px;
  color: #fcf6ff;
  cursor: pointer;
  user-select: none;
}
  
  .champion-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
    gap: 15px;
    justify-items: center;
  }
  
  .champion-card {
    width: 100%;
    max-width: 140px;
    text-align: center;
    cursor: pointer;
    transition: transform 0.2s;
  }
  
  .champion-card:hover {
    transform: scale(1.05);
  }
  
 .card-image {
  position: relative;
  aspect-ratio: 140 / 182;
  width: 100%;
  overflow: hidden;
}

/* Glow noir entre l'image et le cadre */
.card-image::before {
  content: "";
  position: absolute;
  inset: 0;
  box-shadow: inset 0 -1px 2px 11px rgba(0, 0, 0, 0.7);
  pointer-events: none;
  z-index: 1; /* entre image (z=0) et frame (z=2) */
}

/* Image du champion */
.champion-img {
  position: relative;
  z-index: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}

/* Cadre de rareté */
.rarity-frame {
  position: absolute;
  inset: 0;
  z-index: 2;
  width: 100%;
  height: 100%;
  object-fit: contain;
  pointer-events: none;
}

/* Icône d’affinité */
.affinity-icon {
  position: absolute;
  bottom: 10px;
  right: 10px;
  width: 26px;
  height: 26px;
  object-fit: contain;
  border-radius: 50%;
  pointer-events: none;
  z-index: 3;
}
  
  .champion-name {
    font-size: 13px;
    font-weight: 600;
    margin-top: 6px;
    text-align: center;
  }
  
  .counter {
    text-align: center;
    margin-bottom: 15px;
    font-size: 15px;
    opacity: 0.8;
  }
  
  @media (max-width: 900px) {
    .filter-buttons {
      grid-template-columns: repeat(2, 1fr);
    }
    .filters-wrapper {
      flex-direction: column;
      align-items: center;
    }
  }
  
  @media (max-width: 700px) {
    #searchInput {
      width: 90%;
    }
    .champion-card {
      max-width: 100px;
    }
    .faction-icon {
      width: 40px;
      height: 40px;
    }
  }
  </style>
</head>

<body>

<!-- BARRE DE MENU CENTRÉE -->
<div id="menu-container"></div>
  
<div class="header-wrapper">
  <header id="page-title">CHAMPIONS INDEX</header>
</div> 

  <div class="container">
    <div class="search-bar">
      <input type="text" id="searchInput" placeholder="Search a champion...">
    </div>

    <div class="faction-bar" id="factionBar"></div>

    <!-- FILTER SECTIONS -->
    <div class="filters-wrapper">

      <!-- RARITY -->
      <div class="filter-section">
        <div class="section-label">Rarity</div>
        <div class="filter-buttons rarity-grid">
          <button class="rarity-btn" data-rarity="Mythical"><img src="img/rarity/Mythical_Icon.webp" alt="Mythical"></button>
          <button class="rarity-btn" data-rarity="Legendary"><img src="img/rarity/Legendary_Icon.webp" alt="Legendary"></button>
          <button class="rarity-btn" data-rarity="Epic"><img src="img/rarity/Epic_Icon.webp" alt="Epic"></button>
          <button class="rarity-btn" data-rarity="Rare"><img src="img/rarity/Rare_Icon.webp" alt="Rare"></button>
          <button class="rarity-btn" data-rarity="Uncommon"><img src="img/rarity/Uncommon_Icon.webp" alt="Uncommon"></button>
          <button class="rarity-btn" data-rarity="Common"><img src="img/rarity/Common_Icon.webp" alt="Common"></button>
        </div>
      </div>

      <!-- AFFINITY -->
      <div class="filter-section">
        <div class="section-label">Affinity</div>
        <div class="filter-buttons affinity-grid">
          <button class="affinity-btn" data-affinity="Force"><img src="img/affinity/Force.webp" alt="Force"></button>
          <button class="affinity-btn" data-affinity="Magic"><img src="img/affinity/Magic.webp" alt="Magic"></button>
          <button class="affinity-btn" data-affinity="Spirit"><img src="img/affinity/Spirit.webp" alt="Spirit"></button>
          <button class="affinity-btn" data-affinity="Void"><img src="img/affinity/Void.webp" alt="Void"></button>
        </div>
      </div>

      <!-- TYPE -->
      <div class="filter-section">
        <div class="section-label">Type</div>
        <div class="filter-buttons type-grid">
          <button class="type-btn" data-type="HP">HP</button>
          <button class="type-btn" data-type="Attack">Attack</button>
          <button class="type-btn" data-type="Defense">Defense</button>
          <button class="type-btn" data-type="Support">Support</button>
        </div>
      </div>

    </div>

    <div class="checkbox-container">
      <label for="invocableOnly">Hide Non-Summonable Champions</label>
      <label class="switch">
        <input type="checkbox" id="invocableOnly">
        <span class="slider"></span>
      </label>
    </div>

    <div class="counter" id="championCount"></div>

    <div id="championGrid" class="champion-grid"></div>
  </div>

  <script>
    let champions = [];
    let factions = [];

    const grid = document.getElementById('championGrid');
    const factionBar = document.getElementById('factionBar');
    const searchInput = document.getElementById('searchInput');
    const rarityButtons = document.querySelectorAll('.rarity-btn');
    const affinityButtons = document.querySelectorAll('.affinity-btn');
    const typeButtons = document.querySelectorAll('.type-btn');
    const invocableCheckbox = document.getElementById('invocableOnly');
    const countDisplay = document.getElementById('championCount');

    let selectedFaction = null;
    let selectedRarities = [];
    let selectedAffinities = [];
    let selectedTypes = [];

    fetch('champions.json')
      .then(res => res.json())
      .then(data => {
        champions = data.champions;
        factions = data.factions;
        renderFactions();
        displayChampions();
      })
      .catch(err => console.error("JSON load error:", err));

    function renderFactions() {
      factions.forEach(f => {
        const img = document.createElement('img');
        img.src = `img/factions/${f.icon}.webp`;
        img.alt = f.name;
        img.classList.add('faction-icon');
        img.dataset.faction = f.name;
        img.addEventListener('click', () => {
          document.querySelectorAll('.faction-icon').forEach(i => i.classList.remove('active'));
          if (selectedFaction === f.name) {
            selectedFaction = null;
          } else {
            selectedFaction = f.name;
            img.classList.add('active');
          }
          displayChampions();
        });
        factionBar.appendChild(img);
      });
    }

    function toggleSelection(array, value) {
      return array.includes(value) ? array.filter(v => v !== value) : [...array, value];
    }

    searchInput.addEventListener('input', displayChampions);
    invocableCheckbox.addEventListener('change', displayChampions);

    rarityButtons.forEach(btn => {
      btn.addEventListener('click', () => {
        btn.classList.toggle('active');
        selectedRarities = toggleSelection(selectedRarities, btn.dataset.rarity);
        displayChampions();
      });
    });

    affinityButtons.forEach(btn => {
      btn.addEventListener('click', () => {
        btn.classList.toggle('active');
        selectedAffinities = toggleSelection(selectedAffinities, btn.dataset.affinity);
        displayChampions();
      });
    });

    typeButtons.forEach(btn => {
      btn.addEventListener('click', () => {
        btn.classList.toggle('active');
        selectedTypes = toggleSelection(selectedTypes, btn.dataset.type);
        displayChampions();
      });
    });

    function displayChampions() {
      const searchTerm = searchInput.value.toLowerCase();
      const invocableOnly = invocableCheckbox.checked;

      const filtered = champions.filter(c => {
        const matchesName = c.name.toLowerCase().includes(searchTerm);
        const matchesFaction = !selectedFaction || c.faction === selectedFaction;
        const matchesRarity = selectedRarities.length === 0 || selectedRarities.includes(c.rarity);
        const matchesAffinity = selectedAffinities.length === 0 || selectedAffinities.includes(c.affinity);
        const matchesType = selectedTypes.length === 0 || selectedTypes.includes(c.type);
        const matchesInvocable = !invocableOnly || c.invocable;
        return matchesName && matchesFaction && matchesRarity && matchesAffinity && matchesType && matchesInvocable;
      });

      grid.innerHTML = "";
      countDisplay.textContent = `${filtered.length} champion${filtered.length !== 1 ? 's' : ''} found`;

      filtered.forEach(c => {
        const card = document.createElement('div');
        card.classList.add('champion-card');

        const imgWrapper = document.createElement('div');
        imgWrapper.classList.add('card-image');

        const img = document.createElement('img');
        img.src = `img/champions/${c.image}.webp`;
        img.alt = c.name;
        img.loading = "lazy";
        img.classList.add('champion-img');

        const frame = document.createElement('img');
        frame.src = `img/rarity/${c.rarity}.webp`;
        frame.alt = `${c.rarity} frame`;
        frame.classList.add('rarity-frame');

        const affinity = document.createElement('img');
        affinity.src = `img/affinity/${c.affinity}.webp`;
        affinity.alt = `${c.affinity} affinity`;
        affinity.classList.add('affinity-icon');

        const name = document.createElement('div');
        name.classList.add('champion-name');
        name.textContent = c.name;

        imgWrapper.appendChild(img);
        imgWrapper.appendChild(frame);
        imgWrapper.appendChild(affinity);
        card.appendChild(imgWrapper);
        card.appendChild(name);
        grid.appendChild(card);
      });

      if (filtered.length === 0) {
        grid.innerHTML = '<p style="grid-column: 1 / -1; text-align:center;">No champions found.</p>';
      }
    }
  </script>
<script src="../script.js"></script>
</body>
</html>
